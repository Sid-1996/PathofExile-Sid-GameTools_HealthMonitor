# ğŸ—ï¸ æŠ€è¡“æ¶æ§‹èªªæ˜

## ç³»çµ±æ¦‚è§€

PathofExile Sid GameTools_HealthMonitor æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œç¢ºä¿é«˜æ•ˆèƒ½å’Œå¯ç¶­è­·æ€§ã€‚

## ğŸ“Š æ ¸å¿ƒæ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸»ç¨‹å¼ (main.py)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ GUI ç•Œé¢æ¨¡çµ„ â”‚  â”‚ ç›£æ§æ ¸å¿ƒæ¨¡çµ„ â”‚  â”‚ é…ç½®ç®¡ç†æ¨¡çµ„ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ å½±åƒè™•ç†æ¨¡çµ„ â”‚  â”‚ è§¸ç™¼åŸ·è¡Œæ¨¡çµ„ â”‚  â”‚ ç³»çµ±æ•´åˆæ¨¡çµ„ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€è¡“æ£§

### å‰ç«¯ç•Œé¢
- **Tkinter**: åŸç”Ÿ GUI æ¡†æ¶ï¼Œè¼•é‡åŒ–ç•Œé¢è¨­è¨ˆ
- **threading**: å¤šç·šç¨‹è™•ç†ï¼Œç¢ºä¿ç•Œé¢éŸ¿æ‡‰æ€§
- **PIL (Pillow)**: åœ–åƒè™•ç†å’Œé¡¯ç¤º

### å½±åƒè™•ç†
- **mss**: é«˜æ•ˆèƒ½è¢å¹•æˆªåœ–ï¼Œä½å»¶é²æ¡æ¨£
- **OpenCV**: é›»è…¦è¦–è¦ºè™•ç†ï¼ŒHSV è‰²å½©ç©ºé–“åˆ†æ
- **NumPy**: æ•¸å€¼è¨ˆç®—å’Œé™£åˆ—æ“ä½œ

### ç³»çµ±æ•´åˆ
- **keyboard**: å…¨å±€ç†±éµç›£è½
- **pygetwindow**: è¦–çª—ç®¡ç†å’Œå®šä½
- **pyautogui**: è‡ªå‹•åŒ–æ“ä½œåŸ·è¡Œ

## ğŸ¯ æ ¸å¿ƒç®—æ³•

### 1. æ™ºèƒ½è‰²å½©æª¢æ¸¬
```python
# HSV è‰²å½©ç©ºé–“è½‰æ›
hsv_image = cv2.cvtColor(screenshot, cv2.COLOR_RGB2HSV)

# å‹•æ…‹é–¾å€¼è¨ˆç®—
health_mask = cv2.inRange(hsv_image, lower_red, upper_red)
mana_mask = cv2.inRange(hsv_image, lower_blue, upper_blue)

# åƒç´ çµ±è¨ˆåˆ†æ
health_percentage = calculate_bar_percentage(health_mask, region)
```

### 2. å¯¦æ™‚ç›£æ§å¾ªç’°
```python
def monitoring_loop():
    while monitoring_active:
        # é«˜æ•ˆèƒ½æˆªåœ–
        screenshot = capture_screen_region(monitor_area)
        
        # ä¸¦è¡Œè™•ç†
        health_data = analyze_health_bar(screenshot)
        mana_data = analyze_mana_bar(screenshot)
        
        # è§¸ç™¼æ¢ä»¶åˆ¤æ–·
        check_trigger_conditions(health_data, mana_data)
        
        # é©æ‡‰æ€§å»¶é²
        time.sleep(adaptive_delay)
```

### 3. è§¸ç™¼æ©Ÿåˆ¶
```python
def trigger_system():
    """
    æ™ºèƒ½è§¸ç™¼ç³»çµ±
    - å¤šé‡æ¢ä»¶åˆ¤æ–·
    - å†·å»æ™‚é–“ç®¡ç†
    - å„ªå…ˆç´šè™•ç†
    """
    if should_trigger_health():
        execute_health_action()
        
    if should_trigger_mana():
        execute_mana_action()
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹å¼å…¥å£
â”œâ”€â”€ gui_handler.py          # GUI ç•Œé¢è™•ç†
â”œâ”€â”€ monitor_core.py         # ç›£æ§æ ¸å¿ƒé‚è¼¯
â”œâ”€â”€ image_processor.py      # å½±åƒè™•ç†æ¨¡çµ„
â”œâ”€â”€ config_manager.py       # é…ç½®æ–‡ä»¶ç®¡ç†
â”œâ”€â”€ trigger_system.py       # è§¸ç™¼åŸ·è¡Œç³»çµ±
â”œâ”€â”€ hotkey_manager.py       # ç†±éµç®¡ç†
â””â”€â”€ utils/
    â”œâ”€â”€ color_detector.py   # é¡è‰²æª¢æ¸¬å·¥å…·
    â”œâ”€â”€ screen_capture.py   # è¢å¹•æˆªåœ–å·¥å…·
    â””â”€â”€ system_tray.py      # ç³»çµ±æ‰˜ç›¤é›†æˆ
```

## âš¡ æ€§èƒ½å„ªåŒ–

### è¨˜æ†¶é«”ç®¡ç†
- æ™ºèƒ½æˆªåœ–å€åŸŸé™åˆ¶
- åœ–åƒæ•¸æ“šçš„åŠæ™‚é‡‹æ”¾
- é…ç½®ç·©å­˜æ©Ÿåˆ¶

### CPU å„ªåŒ–
- å¤šç·šç¨‹ä¸¦è¡Œè™•ç†
- é©æ‡‰æ€§ç›£æ§é »ç‡
- é«˜æ•ˆçš„åƒç´ çµ±è¨ˆç®—æ³•

### éŸ¿æ‡‰é€Ÿåº¦
- ç¡¬é«”åŠ é€Ÿæ”¯æ´
- é ç·¨è­¯æ­£å‰‡è¡¨é”å¼
- æœ€å°åŒ– I/O æ“ä½œ

## ğŸ›¡ï¸ ç©©å®šæ€§è¨­è¨ˆ

### ä¾‹å¤–è™•ç†
```python
try:
    screenshot = capture_screen()
    result = process_image(screenshot)
except ScreenCaptureError:
    fallback_capture_method()
except ProcessingError:
    reset_processing_state()
except Exception as e:
    log_error(e)
    continue_monitoring()
```

### éŒ¯èª¤æ¢å¾©
- è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
- é™ç´šè™•ç†ç­–ç•¥
- ç‹€æ…‹ä¸€è‡´æ€§ä¿è­‰

## ğŸ”— æ“´å±•æ€§

### æ¨¡çµ„åŒ–è¨­è¨ˆ
- æ’ä»¶å¼æ¶æ§‹æ”¯æ´
- é…ç½®é©…å‹•åŠŸèƒ½
- API æ¥å£é ç•™

### å®¢è£½åŒ–æ”¯æ´
- éˆæ´»çš„é…ç½®é¸é …
- ç”¨æˆ¶è‡ªå®šç¾©è¦å‰‡
- å¤šéŠæˆ²é©é…æ½›åŠ›

---

**æ³¨æ„**: æ­¤æ¶æ§‹æ–‡æª”åƒ…å±•ç¤ºæŠ€è¡“è¨­è¨ˆæ¦‚å¿µï¼Œå…·é«”å¯¦ç¾ç´°ç¯€å¯èƒ½å› ç‰ˆæœ¬æ›´æ–°è€Œèª¿æ•´ã€‚